# test.conf - Complete test configuration for mod_webp

# Load the module
LoadModule webp_module modules/mod_webp.so

# Server configuration
ServerRoot "/tmp/apache2"
Listen 8080
ServerName localhost

# Core modules (typically loaded by default in real Apache)
LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule unixd_module modules/mod_unixd.so

# Document root
DocumentRoot "/tmp/webp-test"

# Directory configuration
<Directory "/tmp/webp-test">
    Require all granted
    
    # Enable WebP conversion
    WebPEnabled On
    WebPQuality 80.0
    WebPCacheDir /tmp/webp-cache
    
    # Apply to image files
    <FilesMatch "\.(jpe?g|png)$">
        SetHandler webp-handler
    </FilesMatch>
</Directory>

# Error and log files
ErrorLog /tmp/apache2/error.log
LogLevel debug
LogFormat "%h %l %u %t \"%r\" %>s %b" common
CustomLog /tmp/apache2/access.log common

# PID file
PidFile /tmp/apache2/httpd.pid